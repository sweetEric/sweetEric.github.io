I"æ<!-- summary pratice -->
<h1 id="ç”Ÿäº§é¡¹ç›®å‘¨æœŸæ€§å´©æºƒåˆ†æ">ç”Ÿäº§é¡¹ç›®å‘¨æœŸæ€§å´©æºƒåˆ†æ</h1>

<hr />

<h2 id="ä¸€ç”Ÿäº§å‡ºç°æœåŠ¡å™¨å¼‚å¸¸ä¸‹çº¿">ä¸€ã€ç”Ÿäº§å‡ºç°æœåŠ¡å™¨å¼‚å¸¸ä¸‹çº¿</h2>
<ol>
  <li>
    <p>ç”Ÿäº§ç¯å¢ƒ
ç¯å¢ƒ:window server2008 R2 x64/4G
é˜¿é‡Œäº‘ç›‘æ§è¿æ¥æ•°ä¸‹é™ï¼ŒCPUã€å†…å­˜ä½¿ç”¨é‡å‡å°‘ï¼Œè€Œä¸”æ ¹æ®å¼‚å¸¸é€€å‡ºçš„æ—¶é—´ï¼Œæ€»ç»“å‡ºä¸€å‘¨å‘ç”Ÿä¸€æ¬¡ã€‚  <br />
<br /></p>
  </li>
  <li>
    <p>æ—¥å¿—è¾“å‡º</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="rouge-code"><pre># A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000018012984f, pid=2412, tid=0x0000000000000e6c
#
# JRE version: Java(TM) SE Runtime Environment (8.0_101-b13) (build 1.8.0_101-b13)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.101-b13 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [tcnative-1.dll+0x12984f]
#
# Core dump written. Default location: E:\apache-tomcat-8.5.31\hs_err_pid2412.mdmp
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.java.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#
---------------  T H R E A D  ---------------
Current thread (0x000000005722b800):  JavaThread "https-openssl-apr-443-exec-15" daemon [_thread_in_native, id=3692, stack(0x0000000068860000,0x0000000068960000)]    
....    
Stack: [0x0000000068860000,0x0000000068960000],  sp=0x000000006895b120,  free space=1004k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [tcnative-1.dll+0x12984f]
C  [tcnative-1.dll+0x12e9fe]
C  [tcnative-1.dll+0x1042c]
C  [tcnative-1.dll+0x56ff]
C  0x0000000002f712a5    
....    
GC Heap History (10 events):
Event: 588.660 GC heap before
{Heap before GC invocations=185 (full 4):
 PSYoungGen      total 66560K, used 64784K [0x00000000fab00000, 0x00000000ff500000, 0x0000000100000000)
  eden space 58368K, 100% used [0x00000000fab00000,0x00000000fe400000,0x00000000fe400000)
  from space 8192K, 78% used [0x00000000fed00000,0x00000000ff344380,0x00000000ff500000)
  to   space 8704K, 0% used [0x00000000fe400000,0x00000000fe400000,0x00000000fec80000)
 ParOldGen       total 175104K, used 122664K [0x00000000f0000000, 0x00000000fab00000, 0x00000000fab00000)
  object space 175104K, 70% used [0x00000000f0000000,0x00000000f77ca218,0x00000000fab00000)
 Metaspace       used 127457K, capacity 129086K, committed 129624K, reserved 1163264K
  class space    used 14489K, capacity 14849K, committed 14936K, reserved 1048576K
Event: 588.673 GC heap after    
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p><br /></p>
  </li>
</ol>

<p><strong>EXCEPTION_ACCESS_VIOLATION</strong> <br />
Essentially, Java will stop with a message such as the above if a â€œseriousâ€ error occurs that means the JVM canâ€™t continue to function. Usually, the most discriminating line is the first mention of a DLL, such as the line in bold above. The source of the error could be any of the following:
a bug in the JVM itself; search Google and/or the Java web site for a mention of ntdll.dll+0x2430;
a bug in some non-Java code that was being run at the time: e.g. Java might have been calling into a printer driver, graphics driver etc. <br />
å®˜æ–¹å¯¹è¯¥é”™è¯¯çš„è§£é‡Šï¼šJVMç¨‹åºæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œæœ‰å¯èƒ½æ˜¯JVMæœ¬èº«çš„BUGï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å¼•å…¥çš„DLLå‡ºç°é—®é¢˜ï¼ŒåŠä¸€èˆ¬åº”å¯¹ç­–ç•¥ã€‚
<br /></p>

<p><strong>C[tcnative-1.dll+0x12984f]</strong>  <br />
JVMCrashæ—¶æ­£åœ¨æ‰§è¡Œçš„åº“æ–‡ä»¶ä»£ç ã€‚é™¤äº†â€œCâ€ä»¥å¤–ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯â€œVâ€ã€â€œjâ€ã€â€œvâ€ã€â€œJâ€ã€‚+0x12984fè¡¨ç¤ºåç§»å€¼  <br />
FrameType Descriptionï¼š
C: Native C frame
j: Interpreted Java frame
V: VMframe
v: VMgenerated stub frame
J: Other frame types, including compiled Java frames   <br />
<br /></p>

<p><strong>Core dump written. Default location: E:\apache-tomcat-8.5.31\hs_err_pid2412.mdmp</strong> <br />
ç”Ÿæˆçš„å†…å­˜å¿«ç…§<br />
<br /></p>

<p><strong>JavaThreadâ€https-openssl-apr-443-exec-15â€</strong>  <br />
æ ‡ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ <br />
<br /></p>

<p><strong>GC Heap History (10 events):</strong> <br />
æœ€å10æ¬¡GCæ—¶ï¼ŒJavaå †ä¸­å„ä¸ªéƒ¨åˆ†çš„å†…å­˜ä½¿ç”¨æƒ…å†µ</p>

<hr />

<h2 id="äºŒåˆ†æ">äºŒã€åˆ†æ</h2>
<ol>
  <li>tcnative-1.dllï¼š Tomcatä¸­APRåº“ï¼Œå¯ç”¨äºä½¿ç”¨JNIçš„æ–¹å¼æ¥è¯»å–æ–‡ä»¶ä»¥åŠè¿›è¡Œç½‘ç»œä¼ è¾“ã€‚å¯ä»¥å¤§å¤§æå‡Tomcatå¯¹é™æ€æ–‡ä»¶çš„å¤„ç†æ€§èƒ½ï¼ŒåŒæ—¶å¦‚æœä½ ä½¿ç”¨äº†HTTPSæ–¹å¼ä¼ è¾“çš„è¯ï¼Œä¹Ÿå¯ä»¥æå‡SSLçš„å¤„ç†æ€§èƒ½ã€‚</li>
  <li>åœ¨æ—¥å¿—ä¸­å¹¶æ— å‡ºç°é¡¹ç›®ä¸­çš„çš„ç›¸å…³åº“å‡½æ•°ï¼Œå¼‚å¸¸é€€å‡ºæ˜¯æœ¬åœ°çš„tcnative-1.dllåº“å‡½æ•°æ‰§è¡Œé”™è¯¯äº§ç”Ÿã€‚</li>
  <li>è€ƒè™‘åˆ°ç‰©è”ç½‘ç³»ç»Ÿä¸­æš‚æ—¶æ²¡æœ‰æ–‡ä»¶ä¸‹è½½åŠŸèƒ½ï¼Œæ–‡ä»¶ç½‘ç»œä¼ è¾“è¦æ±‚å¹¶ä¸é«˜ï¼Œå¯ä»¥è€ƒç‡ç›´æ¥æ¢æ‰APRåº“</li>
</ol>

<hr />

<h2 id="ä¸‰-è§£å†³æ–¹æ³•">ä¸‰. è§£å†³æ–¹æ³•</h2>
<ol>
  <li>å¯¹è¯¥tcnative-1.dllå¤‡ä»½ï¼ŒD:..\apache-tomcat-8.5.43\bin ä¸‹åˆ é™¤è¯¥DLLåº“ã€‚</li>
  <li>D:..\apache-tomcat-8.5.43\conf\server.xml æŸäº›ç«¯å£ä½¿ç”¨é€šè¿‡APRè¿›è¡Œåˆå§‹åŒ–ï¼Œç°åœ¨éœ€è¦ä½¿ç”¨NIOåˆå§‹åŒ–ã€‚
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre> //å¦‚ä¸‹
 &lt;Connector port="443" protocol="org.apache.coyote.http11.Http11AprProtocol"
            maxThreads="150" SSLEnabled="true" scheme="https" secure="true" &gt;
 &lt;Connector port="443" protocol="org.apache.coyote.http11.Http11NioProtocol"
            maxThreads="150" SSLEnabled="true" scheme="https" secure="true" &gt;
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>åœ¨æµ‹è¯•æœåŠ¡å™¨è¿è¡Œï¼Œæµ‹è¯•ã€‚</li>
</ol>
:ET